local p=game:GetService("Players").LocalPlayer
local farming=false
local th
local maxLines=100
local tDelay=0.1
local rDelay=60
local TweenService=game:GetService("TweenService")

local gui=Instance.new("ScreenGui",p:WaitForChild("PlayerGui"))

local root=Instance.new("Frame",gui)
root.Size=UDim2.new(0.24,0,0.24,0)
root.Position=UDim2.new(0.38,0,0.38,0)
root.BackgroundColor3=Color3.fromRGB(30,30,30)
root.Active=true root.Draggable=true
Instance.new("UICorner",root).CornerRadius=UDim.new(0,8)

local header=Instance.new("Frame",root)
header.Size=UDim2.new(1,0,0.12,0)
header.BackgroundColor3=Color3.fromRGB(45,45,45)
local hStroke=Instance.new("UIStroke",header)
hStroke.Color=Color3.new(1,1,1)
hStroke.Thickness=2
hStroke.ApplyStrokeMode=Enum.ApplyStrokeMode.Border

local title=Instance.new("TextLabel",header)
title.Size=UDim2.new(0.6,0,1,0)
title.Position=UDim2.new(0.02,0,0,0)
title.BackgroundTransparency=1
title.Text="Szwedzior Fucker V1.2"
title.TextScaled=true
title.TextColor3=Color3.new(1,1,1)
title.Font=Enum.Font.GothamBold

local closeBtn=Instance.new("TextButton",header)
closeBtn.Size=UDim2.new(0.08,0,0.7,0)
closeBtn.Position=UDim2.new(0.9,0,0.15,0)
closeBtn.Text="X"
closeBtn.TextScaled=true
closeBtn.TextColor3=Color3.new(1,1,1)
closeBtn.BackgroundTransparency=1

local body=Instance.new("Frame",root)
body.Size=UDim2.new(1,0,0.88,0)
body.Position=UDim2.new(0,0,0.12,0)
body.BackgroundTransparency=1
local bStroke=Instance.new("UIStroke",body)
bStroke.Color=Color3.new(1,1,1)
bStroke.Thickness=2
bStroke.ApplyStrokeMode=Enum.ApplyStrokeMode.Border

local console=Instance.new("ScrollingFrame",body)
console.Size=UDim2.new(0.4,0,1,0)
console.BackgroundColor3=Color3.fromRGB(20,20,20)
console.ScrollBarThickness=6
console.CanvasSize=UDim2.new(0,0,0,0)
local grid=Instance.new("UIGridLayout",console)
grid.CellSize=UDim2.new(1,0,0,22)
grid.SortOrder=Enum.SortOrder.LayoutOrder
local cPad=Instance.new("UIPadding",console)
cPad.PaddingTop=UDim.new(0.01,0)
cPad.PaddingBottom=UDim.new(0.01,0)

local main=Instance.new("Frame",body)
main.Size=UDim2.new(0.6,0,1,0)
main.Position=UDim2.new(0.4,0,0,0)
main.BackgroundColor3=Color3.fromRGB(35,35,35)
local mp=Instance.new("UIPadding",main)
mp.PaddingTop=UDim.new(0.05,0) mp.PaddingLeft=UDim.new(0.05,0) mp.PaddingRight=UDim.new(0.05,0)
local il=Instance.new("UIListLayout",main)
il.FillDirection=Enum.FillDirection.Vertical
il.HorizontalAlignment=Enum.HorizontalAlignment.Center
il.VerticalAlignment=Enum.VerticalAlignment.Top
il.Padding=UDim.new(0,10)

local function mkInput(lbl,def)
    local c=Instance.new("Frame")
    c.Size=UDim2.new(0.9,0,0.15,0)
    c.BackgroundTransparency=1
    local t=Instance.new("TextLabel",c)
    t.Size=UDim2.new(0.45,0,1,0)
    t.BackgroundTransparency=1
    t.Text=lbl t.TextScaled=true t.TextColor3=Color3.new(1,1,1) t.Font=Enum.Font.Gotham
    local b=Instance.new("TextBox",c)
    b.Size=UDim2.new(0.55,0,1,0)
    b.Position=UDim2.new(0.45,0,0,0)
    b.Text=tostring(def) b.TextScaled=true b.TextColor3=Color3.new(1,1,1)
    b.BackgroundColor3=Color3.fromRGB(50,50,50) b.Font=Enum.Font.Gotham
    c.Parent=main return b
end

local function mkCheckbox(lbl)
    local c=Instance.new("Frame")
    c.Size=UDim2.new(0.9,0,0.12,0)
    c.BackgroundTransparency=1
    local box=Instance.new("TextButton",c)
    box.Size=UDim2.new(0.15,0,1,0)
    box.Text="☐"
    box.TextScaled=true
    box.TextColor3=Color3.new(1,1,1)
    box.BackgroundColor3=Color3.fromRGB(50,50,50)
    local txt=Instance.new("TextLabel",c)
    txt.Size=UDim2.new(0.85,0,1,0)
    txt.Position=UDim2.new(0.15,0,0,0)
    txt.BackgroundTransparency=1
    txt.Text=lbl
    txt.TextScaled=true
    txt.TextColor3=Color3.new(1,1,1)
    txt.Font=Enum.Font.Gotham
    local state=false
    box.MouseButton1Click:Connect(function()
        state=not state
        box.Text= state and "☑" or "☐"
    end)
    c.Parent=main
    return function() return state end
end

local teleBox=mkInput("Teleport delay:",tDelay)
local roundBox=mkInput("Round delay:",rDelay)
local buyCheck=mkCheckbox("Buy 2x Shells Potion")
local useCheck=mkCheckbox("Use 2x Shells Potion")

local startBtn=Instance.new("TextButton",main)
startBtn.Size=UDim2.new(0.9,0,0.18,0)
startBtn.Text="Auto Farm: OFF"
startBtn.TextScaled=true startBtn.TextColor3=Color3.new(1,1,1)
startBtn.Font=Enum.Font.GothamBold
startBtn.BackgroundColor3=Color3.fromRGB(0,170,255)
Instance.new("UICorner",startBtn).CornerRadius=UDim.new(0,25)
local sbs=Instance.new("UIStroke",startBtn)
sbs.Color=Color3.new(1,1,1) sbs.Thickness=2 sbs.ApplyStrokeMode=Enum.ApplyStrokeMode.Border

local function log(s)
    local l=Instance.new("TextLabel",console)
    l.Size=UDim2.new(1,0,0,22) l.BackgroundTransparency=1
    l.Text=s l.TextScaled=true l.TextColor3=Color3.new(1,1,1) l.Font=Enum.Font.Gotham
    local pad=Instance.new("UIPadding",l)
    pad.PaddingLeft=UDim.new(0.02,0) pad.PaddingRight=UDim.new(0.02,0)
    local labels={}
    for _,ch in ipairs(console:GetChildren())do
        if ch:IsA("TextLabel")then table.insert(labels,ch) end
    end
    if #labels>maxLines then
        for i=1,math.min(10,#labels) do
            labels[i]:Destroy()
        end
    end
    console.CanvasSize=UDim2.new(0,0,0,grid.AbsoluteContentSize.Y)
    console.CanvasPosition=Vector2.new(0,console.CanvasSize.Y.Offset)
end

local function farm()
    while farming do
        log("Starting new AutoFarm round")
        local char=p.Character or p.CharacterAdded:Wait()
        local union=char:FindFirstChild("Union")
        if char and char.PrimaryPart and union then
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("RemoteEvent"):FireServer("EnterArena")
            log("Entered Arena")
            for _,el in ipairs(workspace.Scriptable.Elements:GetChildren())do
                if not farming then return end
                local hb=el:FindFirstChild("Hitbox")
                if hb and hb:IsA("BasePart")then
                    local rootPart=char.PrimaryPart
                    local tweenTime=(tonumber(teleBox.Text) or tDelay)/2
                    local tweenInfo=TweenInfo.new(tweenTime,Enum.EasingStyle.Linear,Enum.EasingDirection.Out)
                    local tween=TweenService:Create(rootPart,tweenInfo,{CFrame=CFrame.new(hb.Position)})
                    tween:Play()
                    tween.Completed:Wait()
                end
            end
            if farming then
                game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("RemoteEvent"):FireServer("BackToSurface")
                log("Sent BackToSurface")
                local union=char:FindFirstChild("Union")
                if char and union and union:IsA("BasePart") then
                    union.Anchored=true
                    task.wait(1)
                    union.Anchored=false
                    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("RemoteEvent"):FireServer("BackToSurface")
                    log("Second BackToSurface after stabilization")
                end
            end
        end

        if buyCheck() then
            for i=1,5 do
                game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("StockShop"):WaitForChild("Purchase"):FireServer("Shells_Potion")
            end
            log("Bought 5x 2x Shells Potion")
        end

        if useCheck() then
            for i=1,5 do
                game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("Inventory"):FireServer("UsePotion","x2 Shells")
            end
            log("Used 5x 2x Shells Potion")
        end

        local wt=tonumber(roundBox.Text) or rDelay
        for i=wt,1,-1 do 
            if not farming then return end 
            log("Next run in "..i.."s") 
            task.wait(1) 
        end
    end
end

startBtn.MouseButton1Click:Connect(function()
    farming=not farming
    if farming then
        startBtn.Text="Auto Farm: ON"
        startBtn.BackgroundColor3=Color3.fromRGB(0,200,0)
        th=task.spawn(farm)
    else
        startBtn.Text="Auto Farm: OFF"
        startBtn.BackgroundColor3=Color3.fromRGB(200,0,0)
    end
end)

closeBtn.MouseButton1Click:Connect(function()
    farming=false 
    if th then task.cancel(th) end 
    gui:Destroy()
end)

